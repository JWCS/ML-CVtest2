%Main
clear;
tic
threshold = 130; filterRegSide = 5; % Apparently can only be 3||5, memory
pixelDens = .0325; %Better than threshold? thresh=80->.0598, 120->.0272
Im = rot90( imread('H1.JPG'), -1 ); %Nature of the im, it's rotated (to me)
Im2 = Im( 1: size(Im, 1)-mod(size(Im, 1),15), 1: size(Im, 2)-mod(size(Im, 2),15), :);
Im2 = MedianFilter(Im2, filterRegSide); 
[ImMag, ImDir] = EdgeOperator( Im2, 'sobel5' ); %Implement "names"
threshold = ThresholdTuner( threshold, ImMag, pixelDens );
ImMag( ImMag < threshold ) = 0; %Can't do same for ImDir, manual rm
%ImMag = IsoPointRm( ImMag );   
toc
%for i = 1: 5; [ImMag, ImDir] = DirExpansion( ImMag, ImDir, 1 ); end;
toc
image( ImMag )
%fancy plotting line following/finding stuff (Goal: begin no later than
%Wednesday)
toc

D = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;...
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;...
0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0;...
0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0;...
0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0;...
0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0;...
0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0;...
0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0;...
0,0,1,1,1,0,0,0,0,1,1,1,1,1,0,0;...
0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0;...
0,0,1,1,0,0,0,0,0,0,0,1,1,1,0,0;...
0,0,1,0,0,0,0,0,0,0,0,0,1,1,0,0;...
0,0,1,0,0,0,0,0,0,0,0,0,1,1,0,0;...
0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0;...
0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0;...
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];